name: High_Pressure

command:
  - >
    mpirun -np 12
    sdrun create
    --pressure {pressure}
    --temperature {create_temp}
    --space-group {space_group}
    --lattice-lengths {cell_dims}
    --output {outdir}
    --steps {create_steps}
    Trimer-T{create_temp:.2f}-P{pressure:.2f}-{space_group}.gsd
  - >
    mpirun -np 12
    sdrun equil
    --equil-type {equil_type}
    --pressure {pressure}
    --init-temp {create_temp}
    --temperature {melt_temp}
    --space-group {space_group}
    --output {outdir}
    --steps {equil_steps}
    Trimer-T{create_temp:.2f}-P{pressure:.2f}-{space_group}.gsd
    Trimer-T{melt_temp:.2f}-P{pressure:.2f}-{space_group}.gsd
  - >
    mpirun -np 12
    sdrun equil
    --equil-type {equil_type}
    --pressure {pressure}
    --init-temp {melt_temp}
    --temperature {temperature}
    --space-group {space_group}
    --output {outdir}
    --steps {equil_steps}
    Trimer-T{melt_temp:.2f}-P{pressure:.2f}-{space_group}.gsd
    Trimer-T{temperature:.2f}-P{pressure:.2f}-{space_group}.gsd
  - >
    sdrun prod
    --pressure {pressure}
    --temperature {temperature}
    --space-group {space_group}
    --output {outdir}
    --steps {steps}
    Trimer-T{temperature:.2f}-P{pressure:.2f}-{space_group}.gsd

variables:
  create_temp: 0.6
  melt_temp: 2.50
  create_steps: 1_000_000
  equil_type: interface
  equil_steps: 10_000_000
  outdir: output
  zip:
    space_group:
      - pg
      - p2
      - p2gg
    cell_dims:
      - 40 42
      - 40 42
      - 40 21
  pressure:
    - 13.50
  steps: 1_000_000_000
  temperature:
    - 1.25
    - 1.30
    - 1.32
    - 1.35
    - 1.37
    - 1.40
    - 1.42
    - 1.44
    - 1.46
    - 1.50

pbs:
  setup:
    - source "$HOME/.miniconda/etc/profile.d/conda.sh"
    - conda activate crystal
  cpus: 12
  memory: 16gb
  walltime: 504:00:00
  project: PRJ-CrysGrowth
  o: logs
  j: oe
